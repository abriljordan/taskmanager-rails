<%= link_to("Back to List", tasks_path, class: 'back-link') %>

<div class="tasks edit">
  <h2 class="text-2xl font-bold">Edit Task</h2>

  <%= form_for(@task) do |f| %>
    <% # url: task_path(@task), method: 'patch' %>

    <%= render(partial: 'form', locals: { f: f }) %>

    <!-- Category Selection -->
    <div class="form-group">
      <%= f.label :category_id, "Category", class: "block text-gray-700 font-bold mb-2" %>
      <%= f.collection_select(:category_id, Category.all, :id, :name, { prompt: 'Select a Category' }, class: 'border border-gray-300 rounded w-full p-2') %>
    </div>

    <!-- User Assignment Section -->
    <div class="form-group mt-4">
      <%= f.label :user_ids, "Assign Users", class: "block text-gray-700 font-bold mb-2" %>
      <%= f.collection_check_boxes :user_ids, User.all, :id, :email do |b| %>
        <div class="mb-2">
          <%= b.check_box %>
          <%= b.label(class: "ml-2") %>
        </div>
      <% end %>
    </div>

    <!-- Form Submission -->
    <div class="form-buttons mt-4">
      <%= f.submit("Edit Task", class: 'bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded') %>
    </div>

  <% end %>
</div>